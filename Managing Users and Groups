# Managing Users and Groups

Accounts have a:

Username (or login ID).
UID (user ID). Unique identifying number.
Default group.
Comments.
Home Directory location.
Shell.

Seven fields represented:

username:password:UID:GID:comments:home_dir:shell

All stored in the following directory:      /etc/passwd

Stay under 8 characters to avoid UID showing in the output of the ps command and othr outputs..

By default, the encrypted password information is stored in /etc/shadow which is only readable by the superuser account.

Root account is always UID 0.

System accounts have UIDs < 1000
  Configured in:    /etc/login.defs

# GID

The group ID, or GID, listed in the password file entry for the account is the account's default group.
When a user creates a file, that file will belong to the user's default group.
If a user wants to create files using another group, they can use the following command:

newgrp

# Comment Field

The comment field usualy contains the user's real name or a description of what the account is used for.
You'll sometimes hear this field refered to as the GECOS field.
This is a historical hold over from the early years of Unix.

# Shell

The shell will be executed when the user logs into the system with their account.
You can see a list of installed shells on your Linux system here:

/etc/shells

+++++++Fedors-VM+++++++
[root@fedora ~]# cat /etc/shells 
/bin/sh
/bin/bash
/usr/bin/sh
/usr/bin/bash
+++++++Fedors-VM+++++++

Whatever is listed in the shell field will be executed upon login even if the program is not actually a shell.
For example, you may see:

'/usr/sbin/nologin' or '/bin/false' in the shell field for certain accounts.

This ensures that no one can use those accounts interactively.

You can also use the shell field to execute a program when a user logs into the system.
For example, you could force users into a menu driven application
that only allows them access to certain actions.

Like the '/etc/passwd' file, the '/etc/shadow' file contains a series of fields separated by a colon.

* The first field is the username.
* The second field contains the encrypted password.
* The third field is the number of days since January 1, 1970 since the password has been changed. (Why date? look into this: [])
* The fourth field is the number of days before the password can be changed.
* The fifth field is the number of days after which the password must be changed.
    If this field contains 99999, the user never has to change their password.
* The sixth field is the number of days to warn the user that their password will expire.
* The seventh field is the number of days after the password has expired that the account is disabled.
* The eighth field is the number of days since Janary 1, 1970 that an account has been disabled.
* The ninth field is reserved for future use.

# Create User:

useradd -c "Grant Stewart" -m -s /bin/bash grant

# Assign the account a password:

passwd grant

# Account information for user "grant":

tail -1 /etc/passwd

+++++++Fedors-VM+++++++
[root@fedora ~]# tail -1 /etc/passwd
grant:x:1001:1001:Grant Stewart:/home/grant:/bin/bash
+++++++Fedors-VM+++++++

tail -1 /etc/shadow

+++++++Fedors-VM+++++++
[root@fedora ~]# tail -1 /etc/shadow
grant:$6$DW6Ry5jHPiYcP2VM$g03uitdmf1KZQLdoSl1vJwNpqnXTgf3v6jZzhrcyG.JnKyQ7TQTBWK.xKOxzapTCjR3hLcp3OeB0hupq5Dub/0:20097:0:99999:7:::
+++++++Fedors-VM+++++++

# More useradd options

-g GROUP            Specify the default group.
-G GROUP1,GROUPN    Additional groups.

groupadd --gid 1000 sales
groupadd --gid 4100 projectx
useradd -c "Eddie Harris" -m -s /bin/bash -g sales -G projectx eharris
passwd eharris
# Enter passwd x2:
passwd: all authentication tokens updated successfully.

# System or Application Accounts:

useradd -c "Apache Web Server User" -d /opt/apache -r -s /usr/sbin/nologin apache

[root@fedora ~]# tail -1 /etc/passwd
apache:x:985:980:Apache Web Server User:/opt/apache:/usr/sbin/nologin

-r                Create a system account.
-d /home/dir      Specify the home directory.

# Use -u to specify the UID:

useradd -c "MySQL Server" -d /opt/mysql -u 97 -s /usr/sbin/nologin mysql
[root@fedora ~]# tail -1 /etc/passwd
mysql:x:97:4101:MySQL Server:/opt/mysql:/usr/sbin/nologin

# Delete user account:

[root@fedora ~]# ls /home
adminuser  eharris  grant

userdel eharris                        Deletes account, leave the home dir intact as there are files.

[root@fedora ~]# userdel -r grant      Deletes user and home dir.
[root@fedora ~]# ls /home
adminuser  eharris

# Update or modify user accounts:

usermod [options] username

-c "COMMENT"        Comments account.
-g GROUP            Specify the default group.
-G GROUP1,GROUPN    Additional groups.
-s /shell/path      Path to the user's shell.

# Group add: Use when needed in live environment, update notes: []

https://external-teksystems.udemy.com/course/linux-administration-bootcamp/learn/lecture/5720644#overview

